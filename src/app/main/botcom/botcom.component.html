<div class="divMain">
    <!-- <app-panel-float-nav></app-panel-float-nav> -->
    <div class="divMid">

        <div style="height: 100%">
           
        </div>
    </div>

    <ng-template #modalImportDevices role="document" let-modal class="center-modal">
        <app-modal-import-devices (onClose)="this.modalRef.hide();"></app-modal-import-devices>
    </ng-template>

    <app-panel-right [selected]="'Dispositivos'">
        <div ngProjectAs="Devices">
            
            <div class="list-group list-group-flush border-bottom scrollarea">

                <div class="d-flex w-100 align-items-center justify-content-between" *ngFor="let monitor of monitors">
                    <div class="d-flex w-100">
                        <div class="col-4"> 
                            <small><strong class="mb-1" *ngIf="monitor.personal!=null">{{monitor.personal.name}}</strong></small>
                        </div>
                        <div class="col-8 flex-d"> 
                            <div class="w-100">
                                <small>Time:{{monitor.time}}</small>
                            </div>
                            <div class="w-100">
                                <small> State: {{b_states[monitor.state]}}</small>
                            </div>
                            <div class="w-100">
                                <small> Device: {{monitor.device?monitor.device.info_device:''}}</small>
                            </div>
                            <div class="w-100">
                                <small> DeviceState: {{b_states_dev[monitor.stateDevice]}}</small>
                            </div>
                            <div class="w-100">
                                <small> Route: {{monitor.route?monitor.route.name:''}}</small>
                            </div>
                       <!--      <div class="w-100">
                                <small> Steps: {{monitor.devicehw?monitor.devicehw.steps:'0'}}</small>
                            </div>-->
                            <div class="w-100">
                                <small> Completed: {{monitor.devicehw?.target?monitor.devicehw.target.completed:'0'}}</small>
                            </div>
                            <div class="w-100">
                                <small> Battery: {{monitor.devicehw?monitor.devicehw.battery:'0'}}</small>
                            </div>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
        <div ngProjectAs="Routes">
            <div *ngIf="mode == StatesEnum.ROUTE_VIEWER">

                <div class="list-group list-group-flush border-bottom scrollarea">

                    <a role="button" class="list-group-item list-group-item-action py-3 lh-tight h-100" style="text-align: center;">
                        <span *ngIf="mode == StatesEnum.ROUTE_VIEWER" style="text-align: center; width:100%" class="btn btn-sm btn-outline-dark  " (click)="openModal(modalImportDevices,null)">Importar Devices</span>
                        
                    </a>
                    
                    <a role="button" class="list-group-item list-group-item-action py-3 lh-tight" *ngFor="let route of routes" (click)="selectRoute(route)">
                        <div class="d-flex w-100 align-items-center justify-content-between">
                            <strong class="mb-1">{{route.name}}</strong>
                            <small>Recorrido: {{route.distance}} metros</small>
                        </div>
                        <div class="col-10 mb-1 small">

                            <div class="border" *ngIf="route.image!=null">
                                <img [src]="route.image.base64" style="width:100%" />
                            </div>
                        </div>
                    </a>
                </div>

            </div>
            <div *ngIf="mode == StatesEnum.ROUTE_CREATOR" class="m-5">
                <h3>Creación de Route</h3>
                <label class="fw-light" for="route">name de Route</label>
                <input class="form-control" id="name" name="route" type="text" required [(ngModel)]="newRoute.name" />

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" checked="checked">
                    <label class="form-check-label" for="flexCheckDefault">
                        Valores por defecto
                    </label>
                </div>
				<div class="row p-5">
					<div class="col-12">		
						<div *ngFor="let section of newRoute.sections;index as i" class="row">
							<div class="form-check form-check-sm"  (mouseenter)="onMouseIn(section)" (mouseleave)="onMouseOut(section)" >
								<input class="form-check-input form-check-input-sm" type="checkbox" id="check-section-{{section.uuid}}" name="check-section-{{section.uuid}}" [(ngModel)]="section.show"/>
								<label class="form-check-label form-check-label-sm" for="check-section-{{section.uuid}}">Section {{i+1}}</label>
							</div>
						</div>						
					</div>

				</div>

                <label class="fw-light" for="name">Split Máximo <small>(metros)</small></label>
                <input class="form-control form-control-sm" id="name" name="name" type="number" value="10" required disabled [(ngModel)]="newRoute.max_split_mt" />

                <label class="fw-light" for="name">distance <small>(metros)</small></label>
                <input class="form-control form-control-sm" id="name" name="name" type="number" [(ngModel)]="distance" required disabled />
                <label class="fw-light" for="name">Miniatura</label>
                <div class="border">
                    <img [src]="thumbRoute" style="width:100%" />
                </div>
                <div class="text-end mt-5">
                    <span *ngIf="mode == StatesEnum.ROUTE_CREATOR" class="btn btn-sm btn-outline-dark rounded-full " (click)="saveRoute()">{{createProgress}}</span>
                    <span *ngIf="mode == StatesEnum.ROUTE_CREATOR" class="btn btn-sm btn-outline rounded-full " (click)="mode = StatesEnum.ROUTE_VIEWER">Cancelar</span>
                </div>

            </div>
            <!-- <li><a class="link-dark rounded" routerLink="routesedit" > crear Route</a></li> -->
        </div>



    </app-panel-right>
</div>